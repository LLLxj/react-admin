{"ast":null,"code":"import axios from 'axios';\nimport Auth from './auth';\nimport { message } from 'antd';\nconst service = axios.create({\n  baseURL: process.env.BASE_API,\n  timeout: 15000 // 请求超时时间\n\n});\nconsole.log(service);\nservice.interceptors.request.use(config => {\n  config.headers['Token'] = Auth.getToken(); // 让每个请求携带自定义token 请根据实际情况自行修改\n\n  return config;\n}, error => {\n  // Do something with request error\n  console.log(error); // for debug\n\n  Promise.reject(error);\n}); // respone拦截器\n\nservice.interceptors.response.use( // response => response,\n// response => response,\nresponse => {\n  console.log(response);\n  /**\n  * code为非20000是抛错 可结合自己业务进行修改\n  */\n\n  const res = response.data;\n\n  if (res.code !== 200) {\n    // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;\n    if (res.code === 50008 || res.code === 50012 || res.code === 50014 || res.code === 5002 || res.code === 1132) {\n      Auth.removeToken; // router.push({ name: 'login' })\n    }\n\n    return response;\n  }\n\n  return response;\n}, error => {\n  console.log('err' + error); // for debug\n\n  message.error(error.msg);\n  return Promise.reject(error);\n});\nexport default service;","map":{"version":3,"sources":["/Users/liuzijian/person/react/my-react-admin/src/utils/request.ts"],"names":["axios","Auth","message","service","create","baseURL","process","env","BASE_API","timeout","console","log","interceptors","request","use","config","headers","getToken","error","Promise","reject","response","res","data","code","removeToken","msg"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,OAAT,QAAwB,MAAxB;AAEA,MAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,QADO;AAE5BC,EAAAA,OAAO,EAAE,KAFmB,CAEb;;AAFa,CAAb,CAAhB;AAKAC,OAAO,CAACC,GAAR,CAAYR,OAAZ;AAEAA,OAAO,CAACS,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiCC,MAAM,IAAI;AAC1CA,EAAAA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0Bf,IAAI,CAACgB,QAAL,EAA1B,CAD0C,CACA;;AAC1C,SAAOF,MAAP;AACA,CAHD,EAGGG,KAAK,IAAI;AACX;AACAR,EAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ,EAFW,CAEQ;;AACnBC,EAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf;AACA,CAPD,E,CASA;;AACAf,OAAO,CAACS,YAAR,CAAqBS,QAArB,CAA8BP,GAA9B,EACA;AACA;AACEO,QAAD,IAAc;AACbX,EAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AACA;;;;AAGA,QAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AACrB;AACA,QAAIF,GAAG,CAACE,IAAJ,KAAa,KAAb,IAAsBF,GAAG,CAACE,IAAJ,KAAa,KAAnC,IAA4CF,GAAG,CAACE,IAAJ,KAAa,KAAzD,IAAkEF,GAAG,CAACE,IAAJ,KAAa,IAA/E,IAAuFF,GAAG,CAACE,IAAJ,KAAa,IAAxG,EAA+G;AAC9GvB,MAAAA,IAAI,CAACwB,WAAL,CAD8G,CAE9G;AACA;;AACD,WAAOJ,QAAP;AACA;;AACD,SAAOA,QAAP;AACA,CAlBF,EAkBIH,KAAK,IAAI;AACXR,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQO,KAApB,EADW,CACe;;AAC1BhB,EAAAA,OAAO,CAACgB,KAAR,CAAcA,KAAK,CAACQ,GAApB;AACA,SAAOP,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAtBF;AAyBA,eAAef,OAAf","sourcesContent":["import axios from 'axios'\nimport Auth from './auth'\nimport { message } from 'antd'\n\nconst service = axios.create({\n\tbaseURL: process.env.BASE_API,\n\ttimeout: 15000 // 请求超时时间\n})\n\nconsole.log(service)\n\nservice.interceptors.request.use(config => {\n\tconfig.headers['Token'] = Auth.getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\n\treturn config\n}, error => {\n\t// Do something with request error\n\tconsole.log(error) // for debug\n\tPromise.reject(error)\n})\n\n// respone拦截器\nservice.interceptors.response.use(\n// response => response,\n// response => response,\n\t(response) => {\n\t\tconsole.log(response)\n\t\t/**\n\t\t* code为非20000是抛错 可结合自己业务进行修改\n\t\t*/\n\t\tconst res = response.data\n\t\tif (res.code !== 200) {\n\t\t\t// 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;\n\t\t\tif (res.code === 50008 || res.code === 50012 || res.code === 50014 || res.code === 5002 || res.code === 1132 ) {\n\t\t\t\tAuth.removeToken\n\t\t\t\t// router.push({ name: 'login' })\n\t\t\t}\n\t\t\treturn response\n\t\t} \n\t\treturn response\n\t}, error => {\n\t\tconsole.log('err' + error)// for debug\n\t\tmessage.error(error.msg)\n\t\treturn Promise.reject(error)\n\t}\n)\n\nexport default service"]},"metadata":{},"sourceType":"module"}